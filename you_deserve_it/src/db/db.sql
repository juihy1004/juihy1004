----------------------------------------------------------------------

DROP TABLE MEMBER_TB;
DROP TABLE CATEGORY_TB;
DROP TABLE LSEARCH_TB;
DROP TABLE ZZIM_TB;
DROP TABLE LDETAIL_TB;
DROP TABLE EXAMDATE_TB;
DROP TABLE COMPANY_TB;
DROP TABLE BOARD_TB;
DROP TABLE COMMENT_TB;
DROP TABLE VISIT_TB;

---- MEMBER_TB ----
CREATE TABLE MEMBER_TB (
    USERID VARCHAR2(50) PRIMARY KEY,
    USERPW VARCHAR2(50) NOT NULL,
    NICKNAME VARCHAR2(50) NOT NULL UNIQUE,
    EMAIL VARCHAR2(100) NOT NULL UNIQUE,
    ISDEL VARCHAR2(2) NOT NULL CHECK(ISDEL IN ('Y','N')) --CHECK���� �߰�
);

--카테고리
CREATE TABLE CATEGORY_TB (
    CCODE VARCHAR2(20) PRIMARY KEY,
    CNAME VARCHAR2(100) NOT NULL UNIQUE,
    CIMG VARCHAR2(200) 
);

--LSEARCH
CREATE TABLE LSEARCH_TB (
    LCODE NUMBER(38) PRIMARY KEY, 
    LNAME VARCHAR2(100) NOT NULL, 
    CCODE1 VARCHAR2(20) REFERENCES CATEGORY_TB(CCODE), 
    CCODE2 VARCHAR2(20) REFERENCES CATEGORY_TB(CCODE),
    CCODE3 VARCHAR2(20) REFERENCES CATEGORY_TB(CCODE),
    CNT NUMBER(38) NOT NULL
);

--LDETAIL
CREATE TABLE LDETAIL_TB(
    LCODE NUMBER(38) PRIMARY KEY REFERENCES LSEARCH_TB(LCODE), 
    INSTITUTE VARCHAR2(500), 
    URLS VARCHAR2(500), 
    SUMMARY VARCHAR2(4000), 
    JOBS VARCHAR2(4000), 
    OUTLOOK VARCHAR2(4000), 
    CHK_W VARCHAR2(2) CHECK(CHK_W IN('Y','N')), 
    CHK_P VARCHAR2(2) CHECK(CHK_P IN('Y','N')), 
    PRICE_W NUMBER(38), 
    PRICE_P NUMBER(38), 
    SUBJECT_W VARCHAR2(4000), 
    SUBJECT_P VARCHAR2(4000), 
    PASS VARCHAR2(4000)
);

--EXAMDATE
CREATE TABLE EXAMDATE_TB(
ECODE NUMBER(38) PRIMARY KEY, 
LCODE NUMBER(38) REFERENCES LSEARCH_TB(LCODE), 
NTH VARCHAR2(500), 
W_PERIOD VARCHAR2(500), 
W_TEST VARCHAR2(500), 
W_PASS VARCHAR2(500), 
P_PREIOD VARCHAR2(500), 
P_TEST VARCHAR2(500), 
P_PASS VARCHAR2(500)
);

--COMPANY
CREATE TABLE COMPANY_TB(
DCODE NUMBER(38) PRIMARY KEY, 
KEYWORD VARCHAR2(20) REFERENCES CATEGORY_TB(CCODE), 
DNAME VARCHAR2(100), 
INDUSTRY VARCHAR2(500), 
DIVIDE VARCHAR2(100), 
HOMEPAGE VARCHAR2(500), 
LOGO VARCHAR2(1000)
);

--ZZIM
CREATE TABLE ZZIM_TB(
    ZZIMCODE VARCHAR2(20) PRIMARY KEY,
    USERID VARCHAR2(20),
    LCODE NUMBER(38) REFERENCES LSEARCH_TB(LCODE)
);

--ZZIM SEQUENCE
DROP SEQUENCE ZZIMSEQ;
CREATE SEQUENCE ZZIMSEQ;

--BOARD
CREATE TABLE BOARD_TB (
    BOARDNO NUMBER(38) PRIMARY KEY,
    NICKNAME VARCHAR2(50),
    HEADTAG VARCHAR2(100),
    TITLE VARCHAR2(500) NOT NULL,
    CONTENT VARCHAR2(4000) NOT NULL,
    REGDATE DATE NOT NULL,
    TABLOC VARCHAR2(100) NOT NULL,
    NOTICE VARCHAR2(20),
    COUNT NUMBER
    
);

--BOARD SEQ
DROP SEQUENCE BOARDSEQ;
CREATE SEQUENCE BOARDSEQ
START WITH 86 
NOCACHE;

--COMMENT
CREATE TABLE COMMENT_TB (
    COMMENTNO NUMBER(38)PRIMARY KEY,
    BOARDNO NUMBER(38) REFERENCES BOARD_TB(BOARDNO) ON DELETE CASCADE,
    NICKNAME VARCHAR2(50),
    REGDATE DATE,
    COMMENTS VARCHAR2(1000) NOT NULL
);

--COMM SEQ
DROP SEQUENCE COMMSEQ;
CREATE SEQUENCE COMMSEQ NOCACHE;

--VISIT
CREATE TABLE VISIT_TB(
   VISITNUM NUMBER(38)
);

--VISIT_TB
INSERT INTO VISIT_TB VALUES(0);
UPDATE VISIT_TB SET VISITNUM = 200;

--TOP 10
UPDATE LSEARCH_TB SET CNT = 20 WHERE LCODE = 1;
UPDATE LSEARCH_TB SET CNT = 19 WHERE LCODE = 2;
UPDATE LSEARCH_TB SET CNT = 18 WHERE LCODE = 3;
UPDATE LSEARCH_TB SET CNT = 17 WHERE LCODE = 4;
UPDATE LSEARCH_TB SET CNT = 16 WHERE LCODE = 5;
UPDATE LSEARCH_TB SET CNT = 15 WHERE LCODE = 6;
UPDATE LSEARCH_TB SET CNT = 14 WHERE LCODE = 7;
UPDATE LSEARCH_TB SET CNT = 21 WHERE LCODE = 8;
UPDATE LSEARCH_TB SET CNT = 13 WHERE LCODE = 9;
UPDATE LSEARCH_TB SET CNT = 12 WHERE LCODE = 10;
UPDATE LSEARCH_TB SET CNT = 11 WHERE LCODE = 185;
UPDATE LSEARCH_TB SET CNT = 12 WHERE LCODE = 184;
UPDATE LSEARCH_TB SET CNT = 13 WHERE LCODE = 71;
UPDATE LSEARCH_TB SET CNT = 24 WHERE LCODE = 131;
UPDATE LSEARCH_TB SET CNT = 20 WHERE LCODE = 467;
UPDATE LSEARCH_TB SET CNT = 16 WHERE LCODE = 522;
UPDATE LSEARCH_TB SET CNT = 17 WHERE LCODE = 501;
UPDATE LSEARCH_TB SET CNT = 16 WHERE LCODE = 522;

--LSEARCH TABLE INSERT
UPDATE LSEARCH_TB SET LNAME = '청소년경제이해검증시험(J-TESAT)' WHERE LCODE = 501;
UPDATE LSEARCH_TB SET LNAME = '경제금융이해력인증시험' WHERE LCODE = 502;

--BOARDE TABLE INSERT

--SELECT
SELECT * FROM MEMBER_TB;
SELECT * FROM CATEGORY_TB;
SELECT * FROM LSEARCH_TB ORDER BY CNT DESC;
SELECT * FROM ZZIM_TB;
SELECT * FROM LDETAIL_TB;
SELECT * FROM EXAMDATE_TB;
SELECT * FROM COMPANY_TB;
SELECT * FROM BOARD_TB;
SELECT * FROM COMMENT_TB;
SELECT * FROM VISIT_TB;

--DELETE
DELETE FROM BOARD_TB;
DELETE FROM COMMENT_TB;

DELETE FROM MEMBER_TB WHERE USERID='MOUSE';